{% load evaluation_filters %}

<fieldset>
    {% for field in evaluation_form %}
        {% if field == evaluation_form.general_questionnaires %}
            <div class="mb-3 d-flex">
                {% include 'bootstrap_form_field_label.html' with field=field class='col-md-3 pe-4' %}
                <div class="col-md-7{% if field.errors %} is-invalid{% endif %}">
                    {% include 'bootstrap_form_errors.html' with errors=field.errors %}
                    {% include 'questionnaires_widget.html' with field=field questionnaires_with_answers=questionnaires_with_answers_per_contributor|get:None%}
                </div>
            </div>
        {% elif field == evaluation_form.participants %}
        <div class="mb-3 d-md-flex">
            {% include 'bootstrap_form_field_label.html' with field=field class='col-md-3 pe-4' %}
            <div class="col-md-7 card collapsible overflow-visible">
                <div class="card-header d-flex">
                    <a class="collapse-toggle collapsed"
                        data-bs-toggle="collapse" href="#contributor-{{ contribution_result.contributor.id }}"
                        aria-controls="contributor-{{ contribution_result.contributor.id }}">
                    </a>
                    <span class="badge rounded-pill badge-btn ms-auto"> {{ evaluation.participants.count }} </span>
                </div>
                <div class="collapse {% if False %} show{% endif %}" id="contributor-{{ contribution_result.contributor.id }}">
                    <div class="card-body">
                        {% include 'bootstrap_form_field_widget.html' with field=field %}
                    </div>
                </div>
            </div>
        </div>

        {% else %}
            {% include 'bootstrap_form_field.html' with field=field %}
        {% endif %}
    {% endfor %}
</fieldset>
